<!-- Calendly inline widget begin -->
<div class="calendly-inline-widget" data-url="https://calendly.com/eca1/ea" style="min-width:320px;height:700px;"></div>
<script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
<!-- Calendly inline widget end -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Loading GIF</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevent body overflow */
        }

        #gif-wrap {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-size: contain;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <div id="gif-wrap"></div>

    <script>
        $(document).ready(function() {
            // Target gif-wrap container
            const $gif_wrap = $("#gif-wrap");

            // Giphy API defaults
            const giphy = {
                baseURL: "https://api.giphy.com/v1/gifs/",
                apiKey: "0UTRbFtkMxAplrohufYco5IY74U8hOes",
                tag: "awesome",
                type: "random",
                rating: "pg-13"
            };

            // Function to fetch and render a new GIF
            const fetchAndRenderGif = () => {
                // Giphy API URL
                let giphyURL = encodeURI(
                    giphy.baseURL +
                    giphy.type +
                    "?api_key=" +
                    giphy.apiKey +
                    "&tag=" +
                    giphy.tag +
                    "&rating=" +
                    giphy.rating
                );

                // Call Giphy API and render data
                $.getJSON(giphyURL, json => renderGif(json.data));
            };

            // Display Gif in gif wrap container
            const renderGif = _giphy => {
                console.log(_giphy);
                // Set gif as bg image
                $gif_wrap.css({
                    "background-image": 'url("' + _giphy.images.original.url + '")'
                });
            };

            // Listen for Calendly event when an appointment is scheduled
            Calendly.initInlineWidgets();
            Calendly.on('calendly.event_scheduled', function(data) {
                console.log('Appointment scheduled:', data);
                // Call fetchAndRenderGif when an appointment is scheduled
                fetchAndRenderGif();
                $gif_wrap.hide(); // Hide the gif-wrap after scheduling
            });
        });
    </script>
</body>
</html>
